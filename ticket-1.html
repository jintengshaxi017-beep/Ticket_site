<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>お夜食券</title>
<link rel="stylesheet" href="style.css">
</head>

<body>
    <h1>お夜食券</h1>
    <img src="midnight_snack.png" style="width: 300px; display: block; margin: 0 auto;">
    <p>沙希ちゃんが一緒に夜食を食べる券です</p>
    <p>※1か月に3回利用できます</p>
    <button id="useBtn">使用する</button>

    <script>
    document.addEventListener("DOMContentLoaded", function(){
        const ticketName="お夜食券";
        const cooldown=1000*60*60;
        const lastUsed=Number(localStorage.getItem(ticketName));
        const now=Date.now();

        const btn=document.getElementById("useBtn");
        
        if(lastUsed && now - lastUsed < cooldown){
            btn.disabled=true;
            btn.innerText="使用不可";
        }

        btn.onclick=function(){
            localStorage.setItem(ticketName, Date.now());
            window.location.href="used.html?ticket=" + encodeURIComponent(ticketName);
        };
    });
    </script>
</body>

</html>









